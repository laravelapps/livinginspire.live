!function(e){var t=!1;if("function"==typeof define&&define.amd&&(define("utils/js.storage",e),t=!0),"object"==typeof exports&&(module.exports=e(),t=!0),!t){var o=window.Storages,n=window.Storages=e();n.noConflict=function(){return window.Storages=o,n}}}(function(){function e(){var e,t,o,n,r,i=this._type,a=arguments.length,s=window[i],c=arguments,l=c[0];if(a<1)throw new Error("Minimum 1 argument must be given");if(Array.isArray(l)){t={};for(n in l)if(l.hasOwnProperty(n)){e=l[n];try{t[e]=JSON.parse(s.getItem(e))}catch(o){t[e]=s.getItem(e)}}return t}if(1!=a){try{t=JSON.parse(s.getItem(l))}catch(e){throw new ReferenceError(l+" is not defined in this storage")}for(n=1;n<a-1;n++)if(void 0===(t=t[c[n]]))throw new ReferenceError([].slice.call(c,1,n+1).join(".")+" is not defined in this storage");if(Array.isArray(c[n])){o=t,t={};for(r in c[n])c[n].hasOwnProperty(r)&&(t[c[n][r]]=o[c[n][r]]);return t}return t[c[n]]}try{return JSON.parse(s.getItem(l))}catch(e){return s.getItem(l)}}function t(){var e,t,o,n,r=this._type,i=arguments.length,a=window[r],s=arguments,l=s[0],u=s[1],f=isNaN(u)?{}:[];if(i<1||!c(l)&&i<2)throw new Error("Minimum 2 arguments must be given or first parameter must be an object");if(c(l)){for(n in l)l.hasOwnProperty(n)&&(e=l[n],c(e)||this.alwaysUseJson?a.setItem(n,JSON.stringify(e)):a.setItem(n,e));return l}if(2==i)return"object"==typeof u||this.alwaysUseJson?a.setItem(l,JSON.stringify(u)):a.setItem(l,u),u;try{o=a.getItem(l),null!=o&&(f=JSON.parse(o))}catch(e){}for(o=f,n=1;n<i-2;n++)e=s[n],t=isNaN(s[n+1])?"object":"array",(!o[e]||"object"==t&&!c(o[e])||"array"==t&&!Array.isArray(o[e]))&&(o[e]="array"==t?[]:{}),o=o[e];return o[s[n]]=s[n+1],a.setItem(l,JSON.stringify(f)),f}function o(){var e,t,o,n,r=this._type,i=arguments.length,a=window[r],s=arguments,c=s[0];if(i<1)throw new Error("Minimum 1 argument must be given");if(Array.isArray(c)){for(o in c)c.hasOwnProperty(o)&&a.removeItem(c[o]);return!0}if(1==i)return a.removeItem(c),!0;try{e=t=JSON.parse(a.getItem(c))}catch(e){throw new ReferenceError(c+" is not defined in this storage")}for(o=1;o<i-1;o++)if(void 0===(t=t[s[o]]))throw new ReferenceError([].slice.call(s,1,o).join(".")+" is not defined in this storage");if(Array.isArray(s[o]))for(n in s[o])s[o].hasOwnProperty(n)&&delete t[s[o][n]];else delete t[s[o]];return a.setItem(c,JSON.stringify(e)),!0}function n(e){var t,n=a.call(this);for(t in n)n.hasOwnProperty(t)&&o.call(this,n[t]);if(e)for(t in d.namespaceStorages)d.namespaceStorages.hasOwnProperty(t)&&s(t)}function r(){var t,o=arguments.length,n=arguments,i=n[0];if(0==o)return 0==a.call(this).length;if(Array.isArray(i)){for(t=0;t<i.length;t++)if(!r.call(this,i[t]))return!1;return!0}try{var s=e.apply(this,arguments);Array.isArray(n[o-1])||(s={totest:s});for(t in s)if(s.hasOwnProperty(t)&&!(c(s[t])&&l(s[t])||Array.isArray(s[t])&&!s[t].length||"boolean"!=typeof s[t]&&!s[t]))return!1;return!0}catch(e){return!0}}function i(){var t,o=arguments.length,n=arguments,r=n[0];if(o<1)throw new Error("Minimum 1 argument must be given");if(Array.isArray(r)){for(t=0;t<r.length;t++)if(!i.call(this,r[t]))return!1;return!0}try{var a=e.apply(this,arguments);Array.isArray(n[o-1])||(a={totest:a});for(t in a)if(a.hasOwnProperty(t)&&(void 0===a[t]||null===a[t]))return!1;return!0}catch(e){return!1}}function a(){var t=this._type,o=arguments.length,n=window[t],r=[],i={};if((i=o>0?e.apply(this,arguments):n)&&i._cookie){var a=Cookies.get();for(var s in a)a.hasOwnProperty(s)&&""!=s&&r.push(s.replace(i._prefix,""))}else for(var c in i)i.hasOwnProperty(c)&&r.push(c);return r}function s(e){if(!e||"string"!=typeof e)throw new Error("First parameter must be a string");y?(window.localStorage.getItem(e)||window.localStorage.setItem(e,"{}"),window.sessionStorage.getItem(e)||window.sessionStorage.setItem(e,"{}")):(window.localCookieStorage.getItem(e)||window.localCookieStorage.setItem(e,"{}"),window.sessionCookieStorage.getItem(e)||window.sessionCookieStorage.setItem(e,"{}"));var t={localStorage:u({},d.localStorage,{_ns:e}),sessionStorage:u({},d.sessionStorage,{_ns:e})};return"undefined"!=typeof Cookies&&(window.cookieStorage.getItem(e)||window.cookieStorage.setItem(e,"{}"),t.cookieStorage=u({},d.cookieStorage,{_ns:e})),d.namespaceStorages[e]=t,t}function c(e){var t,o;return!(!e||"[object Object]"!==h.call(e))&&(!(t=m(e))||"function"==typeof(o=p.call(t,"constructor")&&t.constructor)&&g.call(o)===w)}function l(e){var t;for(t in e)return!1;return!0}function u(){for(var e=1,t=arguments[0];e<arguments.length;e++){var o=arguments[e];for(var n in o)o.hasOwnProperty(n)&&(t[n]=o[n])}return t}var f={},h=f.toString,p=f.hasOwnProperty,g=p.toString,w=g.call(Object),m=Object.getPrototypeOf,d={},y=function(e){try{return!!window[e]&&(window[e].setItem("jsapi","jsapi"),window[e].removeItem("jsapi"),!0)}catch(e){return!1}}("localStorage"),v={_type:"",_ns:"",_callMethod:function(e,t){t=Array.prototype.slice.call(t);var o=[],n=t[0];return this._ns&&o.push(this._ns),"string"==typeof n&&-1!==n.indexOf(".")&&(t.shift(),[].unshift.apply(t,n.split("."))),[].push.apply(o,t),e.apply(this,o)},alwaysUseJson:!1,get:function(){return this._callMethod(e,arguments)},set:function(){var e=arguments.length,o=arguments,n=o[0];if(e<1||!c(n)&&e<2)throw new Error("Minimum 2 arguments must be given or first parameter must be an object");if(c(n)&&this._ns){for(var r in n)n.hasOwnProperty(r)&&this._callMethod(t,[r,n[r]]);return n}var i=this._callMethod(t,o);return this._ns?i[n.split(".")[0]]:i},remove:function(){if(arguments.length<1)throw new Error("Minimum 1 argument must be given");return this._callMethod(o,arguments)},removeAll:function(e){return this._ns?(this._callMethod(t,[{}]),!0):this._callMethod(n,[e])},isEmpty:function(){return this._callMethod(r,arguments)},isSet:function(){if(arguments.length<1)throw new Error("Minimum 1 argument must be given");return this._callMethod(i,arguments)},keys:function(){return this._callMethod(a,arguments)}};if("undefined"!=typeof Cookies){window.name||(window.name=Math.floor(1e8*Math.random()));var S={_cookie:!0,_prefix:"",_expires:null,_path:null,_domain:null,setItem:function(e,t){Cookies.set(this._prefix+e,t,{expires:this._expires,path:this._path,domain:this._domain})},getItem:function(e){return Cookies.get(this._prefix+e)},removeItem:function(e){return Cookies.remove(this._prefix+e,{path:this._path})},clear:function(){var e=Cookies.get();for(var t in e)e.hasOwnProperty(t)&&""!=t&&(!this._prefix&&-1===t.indexOf("ls_")&&-1===t.indexOf("ss_")||this._prefix&&0===t.indexOf(this._prefix))&&Cookies.remove(t)},setExpires:function(e){return this._expires=e,this},setPath:function(e){return this._path=e,this},setDomain:function(e){return this._domain=e,this},setConf:function(e){return e.path&&(this._path=e.path),e.domain&&(this._domain=e.domain),e.expires&&(this._expires=e.expires),this},setDefaultConf:function(){this._path=this._domain=this._expires=null}};y||(window.localCookieStorage=u({},S,{_prefix:"ls_",_expires:3650}),window.sessionCookieStorage=u({},S,{_prefix:"ss_"+window.name+"_"})),window.cookieStorage=u({},S),d.cookieStorage=u({},v,{_type:"cookieStorage",setExpires:function(e){return window.cookieStorage.setExpires(e),this},setPath:function(e){return window.cookieStorage.setPath(e),this},setDomain:function(e){return window.cookieStorage.setDomain(e),this},setConf:function(e){return window.cookieStorage.setConf(e),this},setDefaultConf:function(){return window.cookieStorage.setDefaultConf(),this}})}return d.initNamespaceStorage=function(e){return s(e)},y?(d.localStorage=u({},v,{_type:"localStorage"}),d.sessionStorage=u({},v,{_type:"sessionStorage"})):(d.localStorage=u({},v,{_type:"localCookieStorage"}),d.sessionStorage=u({},v,{_type:"sessionCookieStorage"})),d.namespaceStorages={},d.removeAllStorages=function(e){d.localStorage.removeAll(e),d.sessionStorage.removeAll(e),d.cookieStorage&&d.cookieStorage.removeAll(e),e||(d.namespaceStorages={})},d.alwaysUseJsonInStorage=function(e){v.alwaysUseJson=e,d.localStorage.alwaysUseJson=e,d.sessionStorage.alwaysUseJson=e,d.cookieStorage&&(d.cookieStorage.alwaysUseJson=e)},d}),function(e){if("function"==typeof define&&define.amd)define("utils/js.cookie",e);else if("object"==typeof exports)module.exports=e();else{var t=window.Cookies,o=window.Cookies=e(window.jQuery);o.noConflict=function(){return window.Cookies=t,o}}}(function(){function e(){for(var e=0,t={};e<arguments.length;e++){var o=arguments[e];for(var n in o)t[n]=o[n]}return t}function t(o){function n(t,r,i){var a;if(arguments.length>1){if(i=e({path:"/"},n.defaults,i),"number"==typeof i.expires){var s=new Date;s.setMilliseconds(s.getMilliseconds()+864e5*i.expires),i.expires=s}try{a=JSON.stringify(r),/^[\{\[]/.test(a)&&(r=a)}catch(e){}return r=encodeURIComponent(String(r)),r=r.replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)),t=t.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),t=t.replace(/[\(\)]/g,escape),document.cookie=[t,"=",r,i.expires&&"; expires="+i.expires.toUTCString(),i.path&&"; path="+i.path,i.domain&&"; domain="+i.domain,i.secure&&"; secure"].join("")}t||(a={});for(var c=document.cookie?document.cookie.split("; "):[],l=/(%[0-9A-Z]{2})+/g,u=0;u<c.length;u++){var f=c[u].split("="),h=f[0].replace(l,decodeURIComponent),p=f.slice(1).join("=");if('"'===p.charAt(0)&&(p=p.slice(1,-1)),p=o&&o(p,h)||p.replace(l,decodeURIComponent),this.json)try{p=JSON.parse(p)}catch(e){}if(t===h){a=p;break}t||(a[h]=p)}return a}return n.get=n.set=n,n.getJSON=function(){return n.apply({json:!0},[].slice.call(arguments))},n.defaults={},n.remove=function(t,o){n(t,"",e(o,{expires:-1}))},n.withConverter=t,n}return t()}),define("components/get-location",["jquery","utils/js.storage","utils/js.cookie"],function(e,t,o){return{init:function(){},getLocation:function(n){var r=this,i=r.checkGeolocationExpirationTime();o.get("location")&&(r.setLocation(o.get("location")),o.remove("location"),r.setGeolocationTime());var a=t.localStorage.get("location");if(i&&a&&(t.localStorage.remove("location"),a=null),a)r.setGeolocationTime(),n&&n(a);else{e.ajax({dataType:"text",method:"GET",url:"/data-api/personalization/getlocation",success:function(e){if(e){var t=e;t?(r.declareGeolocationEvent("located",t),r.setLocation(t),n&&n(t)):(r.declareGeolocationEvent("unfound"),n&&n(null))}else r.declareGeolocationEvent("unfound"),n&&n(null)},error:function(){r.declareGeolocationEvent("unfound"),n&&n(null)}})}},setLocation:function(e){var o=this;t.localStorage.set("location",e),o.setGeolocationTime()},setGeolocationTime:function(){t.localStorage.set("geolocationTime",Date.now())},checkGeolocationExpirationTime:function(){var e=t.localStorage.get("geolocationTime");if(e){var o=new Date(e),n=new Date(new Date(o).setMinutes(o.getMinutes()+30));return new Date(Date.now())>n}return!1},declareGeolocationEvent:function(e,t){var o=window.dataLayer=window.dataLayer||[];t?o.push({event:"location-status",geolocation:e,location:t}):o.push({event:"location-status",geolocation:e})},declareManualGeolocationEvent:function(e){var t=window.dataLayer=window.dataLayer||[];e&&t.push({event:"location-status",geolocation:"manually-entered",manualLocation:e})}}}),define("components/wffm-field-geolocation",["jquery","components/get-location"],function(e,t){function o(e){e&&n(e)}function n(e){r.$wffmGeolocationField.val(e)}var r={};return{init:function(){r={$wffmGeolocationField:e(".wffm-geolocation-field")},t.getLocation(o)}}});